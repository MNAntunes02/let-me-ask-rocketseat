<header class="w-full py-5 bg-light border-b border-grey-light px-40 flex justify-between items-center fixed">
    <div routerLink="/login" class="cursor-pointer">
        <img src="./assets/Logo.svg" alt="" class="w-28">
    </div>
    <div class="flex" >
        <div matTooltip="Copiar" class="border rounded-lg bg-light border-primary pr-3 pl-12 py-2 font-medium ml-2 flex justify-between relative overflow-hidden cursor-pointer">
            <div class="bg-primary h-10 w-10 absolute left-0 top-0 flex justify-center items-center">
                <img src="./assets/Icon-copy.svg" alt="">
            </div>
            <span  class="font-medium text-dark">Sala #{{idSala}}</span>
        </div>
        <div    routerLink="/criar-sala" 
                [ngClass]="{'hidden': !(salaDoc.donoSala == currentNome)}"
                class="border rounded-lg border-primary text-primary bg-light px-6 py-2 font-medium ml-2 cursor-pointer">Encerrar sala</div>
        <div    (click)="logout()" 
                [ngClass]="{'hidden': currentNome == null}"
                class="border rounded-lg  text-light bg-danger hover:bg-danger-hover transition-colors px-6 py-2 font-medium ml-2 cursor-pointer">Logout</div>
    </div>
</header>

<main class="px-40 lg:px-80 pt-36 bg-light min-h-screen">

    <h2 class="poppins text-2xl font-bold text-dark flex items-center mb-6">
        <span *ngIf="salaDoc">{{salaDoc.nomeSala}}</span>
        <span class="rounded-full bg-secondary px-4 py-2 text-sm font-medium text-base-color ml-4">{{nPerguntas}} perguntas</span>
    </h2>

    <form   (submit)="mandarMensagem(inputMensagem.value, $event)" 
            [ngClass]="{'hidden': salaDoc.donoSala == currentNome}"
            class="flex flex-col py-4">
        <div>
            <textarea class="w-full p-4 rounded-lg min-h-[133px]" placeholder="O que você quer perguntar?" type="" #inputMensagem></textarea>
        </div>
        <div class="flex justify-between items-center py-4">
            <div class="flex items-center">
                <div *ngIf="currentPhoto == null, else Photo" class="w-8 h-8 rounded-full bg-primary mr-2 flex justify-center items-center">
                    <img src="./assets/user.svg" alt="">
                </div>
                <ng-template #Photo>
                    <div class="w-8 h-8 rounded-full bg-primary mr-2 flex justify-center items-center overflow-hidden">
                        <img [src]="currentPhoto" alt="">
                    </div>
                </ng-template>
                <div *ngIf="currentNome == null,else Nome">
                    Para enviar uma pergunta, <a href="/login" class="text-primary">faça seu login.</a>
                </div>
                <ng-template #Nome>
                    <span>{{currentNome}}</span>
                </ng-template>
            </div>
            <!-- Usado quando usario não esta logado não logado -->
            <!-- <span>Para enviar uma pergunta,  <span class="text-primary underline cursor-pointer">faça seu login.</span></span> -->
            <button [disabled]="currentNome == null" class="px-8 py-3 rounded-lg bg-primary hover:bg-primary-hover text-base-color font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Enviar pergunta</button>
        </div>
    </form>

    <section *ngIf="perguntas$ | async as perguntas, else loading" class="pb-20">
        <div *ngFor="let pergunta of perguntas | async">
            <app-pergunta   [status]="pergunta.status" 
                            [conteudoPergunta]="pergunta.conteudoPergunta" 
                            [nomeUser]="pergunta.nomeUser" 
                            [photoUser]="pergunta.photoUser" 
                            [likes]="pergunta.likes"
                            [id]="pergunta.id">
            </app-pergunta>
        </div>
    </section>

    <!-- Usada quando não tem nenhuma pergunta -->
    <ng-template class="w-full pb-4" #loading>
        <div class="w-full p-6 py-28 rounded-lg mb-2 bg-grey-light animate-pulse"></div>
        <div class="w-full p-6 py-28 rounded-lg mb-2 bg-grey-light animate-pulse"></div>
        <div class="w-full p-6 py-28 rounded-lg mb-2 bg-grey-light animate-pulse"></div>
    </ng-template>

    <!-- Usada quando não tem nenhuma pergunta -->
    <section *ngIf="nPerguntas == 0" class="w-full h-full">
        <div class="w-full pb-16 flex flex-col justify-center items-center text-center">
            <img src="./assets/Ilustração.svg" alt="">
            <span class="poppins text-lg font-semibold mt-4 text-dark">Nenhuma pergunta por aqui...</span>
            <span class="mt-2 text-sm text-grey-dark">Envie o código desta sala para seus amigos e<br/>comece a responder perguntas!</span>
        </div>
    </section>


</main>